USE `trotsa`;
DROP function IF EXISTS `authorization`;

USE `trotsa`;
DROP function IF EXISTS `trotsa`.`authorization`;
;

DELIMITER $$
USE `trotsa`$$
CREATE DEFINER=`root`@`localhost` FUNCTION `authorization`(login_reg varchar(15), pass_reg varchar(10)) RETURNS tinyint(1)
    DETERMINISTIC
BEGIN
DECLARE USER_COUNTER INTEGER;
DECLARE OK BOOL;

select count(*) INTO USER_COUNTER from trotsa.registrars where Login_registrar = login_reg and Password_registrar = pass_reg;

IF (USER_COUNTER = 0) then  SET OK = FALSE;
ELSEIF (USER_COUNTER = 1) THEN SET OK = TRUE;
END IF; 
RETURN OK;
END$$

DELIMITER ;
;

